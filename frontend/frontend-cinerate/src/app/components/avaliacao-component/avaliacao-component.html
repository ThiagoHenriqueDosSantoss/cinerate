<div class="modalContent">
    <p-dialog header="Adicionar Avaliação" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
      <div class="flex flex-column gap-2">
          <label for="comentario" class="font-semibold">Comentário:</label>
          <textarea 
            id="comentario" 
            pInputTextarea 
            [(ngModel)]="novaAvaliacao.comentario"
            rows="5" 
            placeholder="Escreva seu comentário sobre a obra..."
            class="w-full"
            maxlength="255">
          </textarea>
          <small class="text-color-secondary">
            {{novaAvaliacao.comentario.length || 0}}/255 caracteres
          </small>
        </div>
      <br>
      <div class="flex flex-column gap-2">
          <label for="nota" class="font-semibold">Nota:</label>
          <p-rating 
            [(ngModel)]="novaAvaliacao.nota" 
            [stars]="5"
            id="nota">
          </p-rating>
          <small class="text-color-secondary">
            {{ novaAvaliacao.nota ? novaAvaliacao.nota + ' de 5 estrelas' : 'Selecione uma nota' }}
          </small>
        </div>
      <br>
      <div class="flex justify-end gap-2">
          <p-button label="Cancel" severity="danger" (click)="visible = false" />
          <p-button label="Save" (click)="salvarAvaliacao()"/>
      </div>
    </p-dialog>
</div>

<div class="p-4">
    <div class="grid">
        <div *ngFor="let obra of obras" class="col-12 md:col-6 lg:col-4 xl:col-3">
            <p-card styleClass="h-full">
                <ng-template #header>
                    <img alt="{{obra.titulo}}" 
                         [src]="obra.imagemUrl" 
                         style="width: 100%; height: 250px; object-fit: cover;" />
                </ng-template>
                <ng-template #title> 
                    <div class="text-xl font-bold">{{obra.titulo}}</div>
                </ng-template>
                <ng-template #subtitle> 
                    <div class="text-sm text-color-secondary line-height-3">
                        {{obra.descricao}}
                    </div>
                </ng-template>
                <div class="card flex justify-center">
                  <p-virtualscroller [items]="items" [itemSize]="50" scrollHeight="200px" styleClass="border border-surface" [style]="{ width: '200px', height: '200px' }">
                      <ng-template #item let-item let-options="options">
                          <div class="flex items-center p-2" [ngClass]="{ 'bg-surface-100 dark:bg-surface-700': options.odd }" style="height: 50px;">
                              <span class="pi pi-user"> {{ item }}</span> 
                          </div>
                      </ng-template>
                  </p-virtualscroller>
              </div>
                <ng-template #footer>
                    <p-button label="Avaliar" 
                              (click)="abrirModalAvaliacao(obra)" 
                              styleClass="w-full" 
                              [outlined]="true" />
                </ng-template>
            </p-card>
        </div>
    </div>
</div>